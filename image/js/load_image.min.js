!function(){"use strict";var e,a,t,n;e=function(e){var a,i,o,r,d,s=0,l={},m=[],p={},c=e.data;for(console.log("spread"),o=0;o<c.length;o+=4)l[(r=t(c.slice(o,o+3)))[2]]=l[r[2]]||0,l[r[2]]+=1,m.push(r);for(i=Object.keys(l),a=Math.max(i.length,18)+3,o=0;o<a+1;o+=1)p[i[o]]=100*Math.log((o+3)/a*(Math.E-1)+1);for(o=0;o<c.length;o+=4)r=m[s],s+=1,r[2]=p[r[2]],d=n(r),c[o]=d[0],c[o+1]=d[1],c[o+2]=d[2];return e};var i=(a=function(e){var a,t,n=decodeURIComponent(location.href),i=[];for(e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=(a=new RegExp("(?:[\\?&]"+e+'=")([^"]*)"',"g")).exec(n);t;)i.push(t[1]),t=a.exec(n);return console.log(e,i,n),i})("img");if(0===i.length)return void $("#main_page").empty().append('<div class="alert alert-warning"><h2>No image provide, add a file name with: <code>?img="<imgName>"</code>.</h2></div>');i="http://db.kinomecore.com/img/kinome/"+i[0]+".tif";var o=new Worker("./js/tiff.worker.min.js");o.onmessage=function(a){var t,n,o,r;t=a.data,o=(n=document.createElement("canvas")).getContext("2d"),n.width=t.width,n.height=t.height,(r=o.createImageData(t.width,t.height)).data.set(new Uint8Array(t.image)),o.putImageData(e(r),0,0),$("#main_page").empty().append(n).append($('<div class="h3">Column&nbsp;&nbsp;</div>').append($("<img>",{src:"arrow-39644_640.png",width:t.width/2+"px"}))).append('<p>This image has been altered to be more visible and is low resolution due to the image conversion step. Please download the raw image and adjust levels to view if you would like a better quaility image.</p><button class="btn btn-lg btn-primary" onclick=window.open("'+i+'")>Download</button>'),$(n).addClass("img-responsive").addClass("center-block")},o.onerror=function(){$("#main_page").empty().append('<div class="alert alert-danger"><h2>Failed to load image.</h2></div>')},function(){n=function(e){var a,t,n,i,o,r,d=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return o=255*l,[o,o,o];for(a=2*l-(t=l<.5?l*(1+s):l+s-l*s),i=[0,0,0],r=0;r<3;r+=1)(n=d+1/3*-(r-1))<0&&(n+=1),n>1&&(n-=1),o=6*n<1?a+6*(t-a)*n:2*n<1?t:3*n<2?a+(t-a)*(2/3-n)*6:a,i[r]=255*o;return i},t=function(e){var a,t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,d=Math.min(i,o,r),s=Math.max(i,o,r),l=s-d;return s===d?a=0:i===s?a=(o-r)/l:o===s?a=2+(r-i)/l:r===s&&(a=4+(i-o)/l),(a=Math.min(60*a,360))<0&&(a+=360),n=(d+s)/2,t=s===d?0:n<=.5?l/(s+d):l/(2-s-d),[a,100*t,100*n]}}(),o.postMessage({url:i,memory:4194304})}();